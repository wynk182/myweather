<!DOCTYPE html>
  <html>
    <head>
      <meta charset="UTF-8">
      <title>What's the weather?</title>
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
      <link rel="stylesheet" type="text/css" href="css/beauter.min.css"/>
    <script src="js/fontawesome-all.min.js"></script>    
    </head>
    <body>
        <div class="_alignCenter titlebar" id="title"></div>
        <div class="">
            <div class="row container">
                <div class="" id="data2"></div>
            </div>
            <div class="row container">
                <div class="col m5 info"><img src="" id="weather_icon" /></div>
                <div class="col m5 info"><div id="data"></div></div>
                <div class="col m2"><a href="#" class="_floatRight"><i class="fas fa-cog"></i></a>
            </div>
                <!--<p id="data2"></p>-->
            </div>
            
             
        </div>
               
    </body>
  </html>
  <script>
      
  require('./renderer.js');
  var config = [
      {
          order:1,
          state:'CA',
          city:'valley_village',
          nickname:'Home'
      },
      {
          order:3,
          state:'OR',
          city:'Salem',
          nickname:'Home town'
      },
      {
          order:2,
          state:'HI',
          city:'Honolulu',
          nickname:'Dream'
      }
  ];
  config.forEach(function(o){
      getWeather(o);
  });
  const request = require('request');
  var state = 'CA';
  var city = 'valley_village';
  let api_key = 'f697f6a381fd3be2';
  
  console.log(url);
  getWeather();
  function getWeather(obj){
    var url = 'http://api.wunderground.com/api/'+api_key+'/conditions/q/' + obj.state + '/' + obj.city + '.json';
    request(url, function (err, response, body) {
      if(err){ console.log('! error:', error);
      } else {
      //console.log(err);
      //console.log(body);
      //console.log(response);
      const weather = JSON.parse(body);
      console.log(weather);
      let loc = weather.current_observation.display_location.full;
      let temp = weather.current_observation.temperature_string;
      //let loc = weather.current_observation.display_location.full;
      let icon_link = weather.current_observation.icon_url.replace("/k/", "/i/");
      let forecast = weather.current_observation.weather;
      let obs_time = weather.current_observation.observation_time;
      console.log(temp);
      //document.getElementById('temp').innerHTML = temp;
      document.getElementById('weather_icon').src = icon_link;
      document.getElementById('title').innerHTML = loc + " " + temp;
      document.getElementById('data').innerHTML = forecast + '<br/>' + temp;
      //document.getElementById('loc').innerHTML = loc;
      document.getElementById('data2').innerHTML = loc + ' ' + obs_time;
      //document.getElementById('temp').innerHTML = temp;
      //document.getElementById('forecast').innerHTML = forecast;
      }
    });
  }
  
  </script>
  <style>
      
      a{
          color:black;
      }
      .titlebar {
        color:white;  
        background-color:darkslategray;
        -webkit-user-select: none;
        -webkit-app-region: drag;
      }
      body:hover{
          background-color: whitesmoke;
          color:black;
      }
  table *{
    border-color: transparent;
  }
  body{
    /*color:white;*/
    background-color: transparent;
  }
  </style>
<script src="js/beauter.min.js"></script>
